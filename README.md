# CodeCraft 2025 - 分布式对象存储控制系统（华为软件精英挑战赛）

🏆 本项目为 2025 华为软件精英挑战赛（CodeCraft 2025）全国决赛参赛作品，实现了一个面向高性能读写优化的分布式对象存储控制模块，涵盖对象多副本写入、磁头调度读取、标签聚类预测与空间碎片整理等复杂系统调度功能。

---

## 📌 项目简介

- **目标任务**：实现一个控制系统，响应外界大量的对象读写/删除请求，并通过合理的调度策略提升系统读写效率，降低碎片度，提高得分。
- **系统背景**：模拟 OBS + SFS Turbo 架构下的 AI-Native 云存储环境，考察控制器在有限硬盘资源下的智能调度能力。
- **核心挑战**：
  - 所有读请求必须在 105 个时间片内完成；
  - 对象需存储 3 个副本，且分布在不同盘；
  - 磁头带令牌开销，必须顺序优化；
  - 存在隐藏标签，需要基于访问行为预测。

---

## 🧠 设计思路与优化策略

### 1️⃣ 写入策略：域感知布局 + 副本分散存储

- 使用“标签感知域划分”策略，将标签相似的对象聚合写入指定的物理区域；
- 对于未知标签对象，采用延迟写入+聚类预测方式动态选择域；
- 3 个副本写入策略基于“盘空间余量 + 热度均衡度”选择目标盘，减少热点硬盘压力。

### 2️⃣ 标签预测策略：滑动窗口 + 动态聚类

- 对每个对象记录其在过去时间窗内的访问频率，形成访问向量；
- 基于向量相似度进行标签归类，用于指导后续写入与GC优化；
- 同时根据已有已知标签对象构建初始簇，加快新标签识别速度。

### 3️⃣ 磁头调度策略：双磁头调度 + 顺序读优先

- 每块盘具备两个磁头，分别调度低冲突读路径；
- 使用“紧急度函数（剩余时间片）”对请求排序；
- 实现 **滑动窗口顺序调度模型**，当目标对象块在同一区域时优先顺序扫描；
- 当顺序扫描不可行，选择 Jump 快速跳跃并冻结该磁头剩余动作。

### 4️⃣ 热度预测机制：滑动时间窗分析

- 对各标签的读写请求采用滑动时间窗统计热度；
- 热度结果影响写入布局、GC策略、磁头调度优先级等多环节；
- 避免冷数据占据热区，提高总体读写命中率。

### 5️⃣ 垃圾回收策略：局部最优交换 + 跨对象域整合

- 每1800时间片执行一次轻量级碎片整理；
- 优先整理小碎片区域，通过块对调合并相邻同标签数据；
- GC过程中不会打断正常读写路径，最大限度利用搬迁预算。

---

## 🧩 项目结构说明

| 文件名 | 功能说明 |
|--------|----------|
| `main.cpp` | 主程序入口，包含控制循环与事件调度 |
| `write_schedule.h` | 负责三副本写入分布与空闲块分配 |
| `tag_schedule.h` | 标签预测、聚类处理逻辑 |
| `point_schedule.h` | 磁头调度策略核心模块 |
| `field_group.h` | 标签域管理与布局抽象 |
| `disk_base.h` / `disk_tool.h` | 磁盘数据结构与状态管理 |
| `tool.h` / `io.h` | 工具类、输入输出适配模块 |

---

## 🔍 编译运行方式（示例）

```bash
g++ -std=c++17 -O2 main.cpp -o codecraft2025
./codecraft2025 < input.txt > output.txt
